.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "IC_MOD_PERL 1"
.TH IC_MOD_PERL 1 "2008-11-12" "perl v5.8.8" "User Contributed Perl Documentation"
.SH "NAME"
ic_mod_perl \-\- Run Interchange entirely inside Apache/mod_perl
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
.Vb 10
\&  # Add to Apache httpd.conf:
\&  PerlRequire /usr/lib/interchange/bin/ic_mod_perl
\&  PerlChildInitHandler Vend::ModPerl::child_start
\&  PerlChildExitHandler Vend::ModPerl::child_end
\&  <Location /ic>
\&      SetHandler perl-script
\&      PerlHandler Vend::ModPerl
\&      PerlSendHeader Off
\&      PerlSetupEnv On
\&  </Location>
.Ve
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
.Sh "Benefits"
.IX Subsection "Benefits"
.RE
.IP "\(bu"
Possibly better stability, especially on non-Linux platforms where
Perl signals are often buggy.
.RE
.IP "\(bu"
Use less memory total; don't have preforked Apache \fIand\fR Interchange
daemons. Adds about 8 \s-1MB\s0 more to a typical Apache/mod_perl child process,
for a total of, say, 32 \s-1MB\s0 per Apache child process. But standalone
Interchange usually has 3 processes: an Interchange child process (~24
\&\s-1MB\s0), an httpd child (~24 \s-1MB\s0), \fIand\fR a link \s-1CGI\s0 (~1 \s-1MB\s0), so it's
actually a decent savings in total memory used.
.RE
.IP "\(bu"
Speed (ranging from slightly faster to the same on heavy pages,
to 10 hits/sec. faster on empty pages).
.RE
.IP "\(bu"
Debugging \*(-- delve into bowels with Apache::Status.
.RE
.IP "\(bu"
Easier coexistence with other mod_perl code and libraries.
.RE
.IP "\(bu"
Can coexist with standalone Interchange codebase without problems.
.RE
.IP "\(bu"
Administrative ease (for sysadmins who know Apache but not Interchange).
.Sh "Drawbacks"
.IX Subsection "Drawbacks"
.RE
.IP "\(bu"
Interchange runs as web server user, which in a standard system is usually
apache or www, so you wouldn't want to share that Apache installation
with untrusted user CGIs, \s-1PHP\s0, etc. as they could read any Interchange
files, including DSNs, userdb, etc.
.RE
.IP "\(bu"
Apache needs to be dedicated, or very closely watched because all
mod_perl stuff runs in the same interpreter, and lots of mod_perl code
doesn't use Safe.
.RE
.IP "\(bu"
How do you scale to multiple app servers in this configuration?
.IP "\(bu" 4
Hardware or software port redirector
.IP "\(bu" 4
Tux \s-1CGI\s0 front-end redirector like tlink
.IP "\(bu" 4
Separate lightweight Apache (no modules) that proxies /ic requests
.Sh "Ideal system setup"
.IX Subsection "Ideal system setup"
Use Tux to serve images & static content, and a dedicated Apache for
Interchange running under the 'interch' user and with no UserDir, \s-1CGI\s0,
\&\s-1PHP\s0, etc. enabled and an empty DocRoot.
.SH "CAVEATS"
.IX Header "CAVEATS"
.RE
.IP "\(bu"
Watch out for differing Storable versions in sessions when switching
between standalone and mod_perl runs!
.SH "BUGS"
.IX Header "BUGS"
.RE
.IP "\(bu"
Haven't yet implemented form/multipart submissions.
.RE
.IP "\(bu"
Don't yet handle TolerateGet.
.RE
.IP "\(bu"
Don't yet handle MiniVend 3 style GETs (mv_session_id;mv_arg;mv_pc)
.RE
.IP "\(bu"
URIs must follow format \f(CW\*(C`/ic/catalogname/page...\*(C'\fR, where /ic is
customizable but must only be one \*(L"directory\*(R" deep (i.e., no
slashes).
.SH "AUTHOR"
.IX Header "AUTHOR"
Jon Jensen <jon@icdevgroup.org>, March 2002
